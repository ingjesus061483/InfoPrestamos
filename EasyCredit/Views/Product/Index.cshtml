@model IEnumerable<DTO.ProductoDTO>

@{

    var Categorias = (List<DTO.CategoriaDTO>)ViewBag.categoria;
    var UnidadMedidas = (List<Factory.UnidadMedida>)ViewBag.unidadmedida;
    ViewBag.Title = "Index";
    }
    <h2>Listado de productos</h2>
    <p>
        <a href="@Url.Action("StocksReport", "Product")" class="btn btn-danger" target="_blank">
            <i class="fa-solid fa-file-pdf"></i>
        </a>
        <button id="btn-product" class="btn btn-primary"><i class="fa-solid fa-cubes-stacked"></i></button>
    </p>
    <table id="datatablesSimple" class="table">
        <thead>
            <tr>
                <th></th>
                <th></th>
                <th></th>
                <th>
                    @Html.DisplayNameFor(model => model.Categoria.Nombre)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.UnidadMedida.Nombre)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Codigo)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Nombre)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Referencia)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Costo)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Precio)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.TotalEntrada)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.TotalSalida)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.TotalExistencia)
                </th>



            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        <button class=" btn btn-warning" onclick="EditarProdiucto(@item.Id)">
                            <i class="fa-solid fa-pencil"></i>
                        </button>

                    </td>
                    <td>
                        <a href="@Url.Action("Details", "Product", new { id = item.Id })" class="btn btn-success">
                            <i class="fa-solid fa-eye"></i>
                        </a>
                    </td>
                    <td>
                        <form action="@Url.Action("Delete", "Product")" onsubmit="return validar('Desea eliminar el producto?')" method="post">
                            <input type="hidden" name="id" id="Id" value="@item.Id" />
                            <button class="btn btn-danger" type="submit">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>
                        </form>
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Categoria.Nombre)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.UnidadMedida.Nombre)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Codigo)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Nombre)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Referencia)
                    </td>
                    <td>
                        @item.Costo.ToString("C0")
                    </td>
                    <td>
                        @item.Precio.ToString("C0")
                    </td>
                    <td>
                        @item.TotalEntrada.ToString("N0")
                    </td>
                    <td>
                        @item.TotalSalida.ToString("N0")
                    </td>
                    <td>
                        @item.TotalExistencia.ToString("N0")
                    </td>



                </tr>
            }
        </tbody>
    </table>
    <div id="dialogProduct">
        <form method="post" id="frmProduct" autocomplete="off">
            <input type="hidden" name=" Id" id="productId" value="0" />
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Codigo
                </label>
                <input type="text" name="Codigo" id="Codigo" class="form-control" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Nombre
                </label>
                <input type="text" name="Nombre" id="Nombre" class="form-control" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Referencia
                </label>
                <input type="text" name="Referencia" id="Referencia" class="form-control" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Costo
                </label>
                <input type="number" name="Costo" id="Costo" class="form-control" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Precio
                </label>
                <input type="number" name="Precio" id="Precio" class="form-control" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Imagen
                </label>
                <input type="file" name="Imagen" id="imagen" />
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Descripcion
                </label>
                <textarea class="form-control" name="Descripcion" id="Descripcion"></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Categoria
                </label>
                <select class="form-select" name="CategoriaId" id="Categoria">
                    <option value="">seleccione una categoria</option>
                    @foreach (var item in Categorias)
                    {
                        <option value="@item.Id">@item.Nombre</option>
                    }
                </select>


            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">Unidad de medida</label>
                <select class="form-select" name="UnidadMedidaId" id="UnidadMedida">
                    <option value="">seleccione una Unidad de medida</option>
                    @foreach (var item in UnidadMedidas)
                    {
                        <option value="@item.Id">@item.Nombre</option>
                    }
                </select>
            </div>
            <div class="mb-3">
                <label class="form-label" for="monto">
                    Existencia
                </label>
                <input type="number" name="Existencia" id="Existencia" class="form-control" />
            </div>

        </form>
    </div>
